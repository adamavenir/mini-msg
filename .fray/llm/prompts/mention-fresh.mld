/import { @agent, @triggerMsgIDs, @userTask } from @payload

// Import fly context (core "I know kung fu" assembly)
/exe @flyContext = @local("../slash/fly.mld", { agent: @agent })

/exe @prompt = `${@flyContext.context}

Trigger messages:
${@triggerMsgIDs | join(", ")}
${@userTask ? `\nTask: ${@userTask}` : ""}

Run: /fly @${@agent} if this is the start of a new session
Run: fray get @${@agent}

---
After 'fray back', reply in the thread where you were mentioned (using "--reply-to <msg-id>"). If you can answer the question immediately and with confidence, just answer directly - no need to ack first. Otherwise, ack quickly then continue. Don't use the literal word 'ack'. Be casual.

IMPORTANT: Users only see messages posted to fray. Your stdout is not visible. Post progress updates and summaries to fray so users can follow your work.`

/show @prompt

/export { @prompt }
